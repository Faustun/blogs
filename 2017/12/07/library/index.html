<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="javascript武器库"/>













  <link rel="alternate" href="/blogs/atom.xml" title="Song">




  <link rel="shortcut icon" type="image/x-icon" href="/blogs/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://songzhiguo.github.io/blogs/2017/12/07/library/"/>


<link rel="stylesheet" type="text/css" href="/blogs/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/blogs/lib/fancybox/jquery.fancybox.css" />




  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









    <title> javascript武器库 - Song </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/blogs/." class="logo">Song</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/blogs/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/blogs/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/blogs/." class="logo">Song</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/blogs/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/blogs/archives/">
            
            
              归档
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          javascript武器库
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-12-07
        </span>
        
          <div class="post-category">
            
              <a href="/blogs/categories/转载收藏/">转载收藏</a>
            
          </div>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#常用函数总汇"><span class="toc-text">常用函数总汇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-text">Array</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1arrayEqual"><span class="toc-text">1.1arrayEqual</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Class"><span class="toc-text">2.Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-hasClass"><span class="toc-text">2.1 hasClass</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-addClass"><span class="toc-text">2.2 addClass</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-removeClass"><span class="toc-text">2.3 removeClass</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Cookie"><span class="toc-text">3.Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-getCookie"><span class="toc-text">3.1 getCookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-removeCookie"><span class="toc-text">3.2 removeCookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-setCookie"><span class="toc-text">3.3 setCookie</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Device"><span class="toc-text">4.Device</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-getExplore"><span class="toc-text">4.1 getExplore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-getOS"><span class="toc-text">4.2 getOS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dom"><span class="toc-text">Dom</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-getScrollTop"><span class="toc-text">5.1 getScrollTop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-offset"><span class="toc-text">5.2 offset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-scrollTo"><span class="toc-text">5.3 scrollTo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-setScrollTop"><span class="toc-text">5.4 setScrollTop</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Keycode"><span class="toc-text">6.Keycode</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-getKeyName"><span class="toc-text">6.1 getKeyName</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Object"><span class="toc-text">7.Object</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-deepClone"><span class="toc-text">7.1 deepClone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-isEmptyObject"><span class="toc-text">7.2 isEmptyObject</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Random"><span class="toc-text">8.Random</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-randomColor"><span class="toc-text">8.1 randomColor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-randomNum"><span class="toc-text">8.2 randomNum </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-Regexp"><span class="toc-text">9.Regexp</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-isEmail"><span class="toc-text">9.1 isEmail</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-isIdCard"><span class="toc-text">9.2 isIdCard</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-isPhoneNum"><span class="toc-text">9.3 isPhoneNum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-isUrl"><span class="toc-text">9.4 isUrl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-String"><span class="toc-text">10.String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-digitUppercase"><span class="toc-text">10.1 digitUppercase</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Support"><span class="toc-text">11.Support</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-isSupportWebP"><span class="toc-text">11.1 isSupportWebP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Time"><span class="toc-text">12.Time</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-formatPassTime"><span class="toc-text">12.1 formatPassTime</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-formatRemainTime"><span class="toc-text">12.2 formatRemainTime</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-Url"><span class="toc-text">13.Url</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-parseQueryString"><span class="toc-text">13.1 parseQueryString</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-stringfyQueryString"><span class="toc-text">13.2 stringfyQueryString</span></a></li></ol></li></ol></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <blockquote>
<ul>
<li>自己打造一把趁手的武器，高效率完成前端业务代码。<a id="more"></a>
</li>
</ul>
</blockquote>
<p><img src="https://songzhiguo.github.io/lib/images/2964183279-5a06f5964878b_articlex.jpg" alt=""></p>
<h2 id="常用函数总汇"><a href="#常用函数总汇" class="headerlink" title="常用函数总汇"></a>常用函数总汇</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><h4 id="1-1arrayEqual"><a href="#1-1arrayEqual" class="headerlink" title="1.1arrayEqual"></a>1.1arrayEqual</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 判断两个数组是否相等</div><div class="line"> * @param &#123;Array&#125; arr1 </div><div class="line"> * @param &#123;Array&#125; arr2 </div><div class="line"> * @return &#123;Boolean&#125;</div><div class="line"> */</div><div class="line">function arrayEqual(arr1, arr2) &#123;</div><div class="line">    if (arr1 === arr2) return true;</div><div class="line">    if (arr1.length != arr2.length) return false;</div><div class="line">    for (var i = 0; i &lt; arr1.length; ++i) &#123;</div><div class="line">        if (arr1[i] !== arr2[i]) return false;</div><div class="line">    &#125;</div><div class="line">    return true;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-Class"><a href="#2-Class" class="headerlink" title="2.Class"></a>2.Class</h3><h4 id="2-1-hasClass"><a href="#2-1-hasClass" class="headerlink" title="2.1 hasClass"></a>2.1 hasClass</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 判断元素是否有某个class</div><div class="line"> * @param &#123;HTMLElement&#125; ele </div><div class="line"> * @param &#123;String&#125; cls </div><div class="line"> * @return &#123;Boolean&#125;</div><div class="line"> */</div><div class="line">function hasClass(ele, cls) &#123;</div><div class="line">    return (new RegExp(&apos;(\\s|^)&apos; + cls + &apos;(\\s|$)&apos;)).test(ele.className);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-2-addClass"><a href="#2-2-addClass" class="headerlink" title="2.2 addClass"></a>2.2 addClass</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   为元素添加class</div><div class="line"> * @param  &#123;HTMLElement&#125; ele </div><div class="line"> * @param  &#123;String&#125; cls </div><div class="line"> */</div><div class="line"></div><div class="line">var hasClass = require(&apos;./hasClass&apos;);</div><div class="line"></div><div class="line">function addClass(ele, cls) &#123;</div><div class="line">    if (!hasClass(ele, cls)) &#123;</div><div class="line">        ele.className += &apos; &apos; + cls;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-3-removeClass"><a href="#2-3-removeClass" class="headerlink" title="2.3 removeClass"></a>2.3 removeClass</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 为元素移除class</div><div class="line"> * @param &#123;HTMLElement&#125; ele </div><div class="line"> * @param &#123;String&#125; cls </div><div class="line"> */</div><div class="line"></div><div class="line">var hasClass = require(&apos;./hasClass&apos;);</div><div class="line"></div><div class="line">function removeClass(ele, cls) &#123;</div><div class="line">    if (hasClass(ele, cls)) &#123;</div><div class="line">        var reg = new RegExp(&apos;(\\s|^)&apos; + cls + &apos;(\\s|$)&apos;);</div><div class="line">        ele.className = ele.className.replace(reg, &apos; &apos;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-Cookie"><a href="#3-Cookie" class="headerlink" title="3.Cookie"></a>3.Cookie</h3><h4 id="3-1-getCookie"><a href="#3-1-getCookie" class="headerlink" title="3.1 getCookie"></a>3.1 getCookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 根据name读取cookie</div><div class="line"> * @param  &#123;String&#125; name </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function getCookie(name) &#123;</div><div class="line">    var arr = document.cookie.replace(/\s/g, &quot;&quot;).split(&apos;;&apos;);</div><div class="line">    for (var i = 0; i &lt; arr.length; i++) &#123;</div><div class="line">        var tempArr = arr[i].split(&apos;=&apos;);</div><div class="line">        if (tempArr[0] == name) &#123;</div><div class="line">            return decodeURIComponent(tempArr[1]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return &apos;&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-2-removeCookie"><a href="#3-2-removeCookie" class="headerlink" title="3.2 removeCookie"></a>3.2 removeCookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var setCookie = require(&apos;./setCookie&apos;);</div><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 根据name删除cookie</div><div class="line"> * @param  &#123;String&#125; name </div><div class="line"> */</div><div class="line">function removeCookie(name) &#123;</div><div class="line">    // 设置已过期，系统会立刻删除cookie</div><div class="line">    setCookie(name, &apos;1&apos;, -1);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-3-setCookie"><a href="#3-3-setCookie" class="headerlink" title="3.3 setCookie"></a>3.3 setCookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc  设置Cookie</div><div class="line"> * @param &#123;String&#125; name </div><div class="line"> * @param &#123;String&#125; value </div><div class="line"> * @param &#123;Number&#125; days </div><div class="line"> */</div><div class="line">function setCookie(name, value, days) &#123;</div><div class="line">    var date = new Date();</div><div class="line">    date.setDate(date.getDate() + days);</div><div class="line">    document.cookie = name + &apos;=&apos; + value + &apos;;expires=&apos; + date;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-Device"><a href="#4-Device" class="headerlink" title="4.Device"></a>4.Device</h3><h4 id="4-1-getExplore"><a href="#4-1-getExplore" class="headerlink" title="4.1 getExplore"></a>4.1 getExplore</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 获取浏览器类型和版本</div><div class="line"> * @return &#123;String&#125; </div><div class="line"> */</div><div class="line">function getExplore() &#123;</div><div class="line">    var sys = &#123;&#125;,</div><div class="line">        ua = navigator.userAgent.toLowerCase(),</div><div class="line">        s;</div><div class="line">    (s = ua.match(/rv:([\d.]+)\) like gecko/)) ? sys.ie = s[1]:</div><div class="line">        (s = ua.match(/msie ([\d\.]+)/)) ? sys.ie = s[1] :</div><div class="line">        (s = ua.match(/edge\/([\d\.]+)/)) ? sys.edge = s[1] :</div><div class="line">        (s = ua.match(/firefox\/([\d\.]+)/)) ? sys.firefox = s[1] :</div><div class="line">        (s = ua.match(/(?:opera|opr).([\d\.]+)/)) ? sys.opera = s[1] :</div><div class="line">        (s = ua.match(/chrome\/([\d\.]+)/)) ? sys.chrome = s[1] :</div><div class="line">        (s = ua.match(/version\/([\d\.]+).*safari/)) ? sys.safari = s[1] : 0;</div><div class="line">    // 根据关系进行判断</div><div class="line">    if (sys.ie) return (&apos;IE: &apos; + sys.ie)</div><div class="line">    if (sys.edge) return (&apos;EDGE: &apos; + sys.edge)</div><div class="line">    if (sys.firefox) return (&apos;Firefox: &apos; + sys.firefox)</div><div class="line">    if (sys.chrome) return (&apos;Chrome: &apos; + sys.chrome)</div><div class="line">    if (sys.opera) return (&apos;Opera: &apos; + sys.opera)</div><div class="line">    if (sys.safari) return (&apos;Safari: &apos; + sys.safari)</div><div class="line">    return &apos;Unkonwn&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4-2-getOS"><a href="#4-2-getOS" class="headerlink" title="4.2 getOS"></a>4.2 getOS</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 获取操作系统类型</div><div class="line"> * @return &#123;String&#125; </div><div class="line"> */</div><div class="line">function getOS() &#123;</div><div class="line">    var userAgent = &apos;navigator&apos; in window &amp;&amp; &apos;userAgent&apos; in navigator &amp;&amp; navigator.userAgent.toLowerCase() || &apos;&apos;;</div><div class="line">    var vendor = &apos;navigator&apos; in window &amp;&amp; &apos;vendor&apos; in navigator &amp;&amp; navigator.vendor.toLowerCase() || &apos;&apos;;</div><div class="line">    var appVersion = &apos;navigator&apos; in window &amp;&amp; &apos;appVersion&apos; in navigator &amp;&amp; navigator.appVersion.toLowerCase() || &apos;&apos;;</div><div class="line"></div><div class="line">    if (/mac/i.test(appVersion)) return &apos;MacOSX&apos;</div><div class="line">    if (/win/i.test(appVersion)) return &apos;windows&apos;</div><div class="line">    if (/linux/i.test(appVersion)) return &apos;linux&apos;</div><div class="line">    if (/iphone/i.test(userAgent) || /ipad/i.test(userAgent) || /ipod/i.test(userAgent)) &apos;ios&apos;</div><div class="line">    if (/android/i.test(userAgent)) return &apos;android&apos;</div><div class="line">    if (/win/i.test(appVersion) &amp;&amp; /phone/i.test(userAgent)) return &apos;windowsPhone&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Dom"><a href="#Dom" class="headerlink" title="Dom"></a>Dom</h3><h4 id="5-1-getScrollTop"><a href="#5-1-getScrollTop" class="headerlink" title="5.1 getScrollTop"></a>5.1 getScrollTop</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 获取滚动条距顶部的距离</div><div class="line"> */</div><div class="line">function getScrollTop() &#123;</div><div class="line">    return (document.documentElement &amp;&amp; document.documentElement.scrollTop) || document.body.scrollTop;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-2-offset"><a href="#5-2-offset" class="headerlink" title="5.2 offset"></a>5.2 offset</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc  获取一个元素的距离文档(document)的位置，类似jQ中的offset()</div><div class="line"> * @param &#123;HTMLElement&#125; ele </div><div class="line"> * @returns &#123; &#123;left: number, top: number&#125; &#125;</div><div class="line"> */</div><div class="line">function offset(ele) &#123;</div><div class="line">    var pos = &#123;</div><div class="line">        left: 0,</div><div class="line">        top: 0</div><div class="line">    &#125;;</div><div class="line">    while (ele) &#123;</div><div class="line">        pos.left += ele.offsetLeft;</div><div class="line">        pos.top += ele.offsetTop;</div><div class="line">        ele = ele.offsetParent;</div><div class="line">    &#125;;</div><div class="line">    return pos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-3-scrollTo"><a href="#5-3-scrollTo" class="headerlink" title="5.3 scrollTo"></a>5.3 scrollTo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">var getScrollTop = require(&apos;./getScrollTop&apos;);</div><div class="line">var setScrollTop = require(&apos;./setScrollTop&apos;);</div><div class="line">var requestAnimFrame = (function () &#123;</div><div class="line">    return window.requestAnimationFrame ||</div><div class="line">        window.webkitRequestAnimationFrame ||</div><div class="line">        window.mozRequestAnimationFrame ||</div><div class="line">        function (callback) &#123;</div><div class="line">            window.setTimeout(callback, 1000 / 60);</div><div class="line">        &#125;;</div><div class="line">&#125;)();</div><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc  在$&#123;duration&#125;时间内，滚动条平滑滚动到$&#123;to&#125;指定位置</div><div class="line"> * @param &#123;Number&#125; to </div><div class="line"> * @param &#123;Number&#125; duration </div><div class="line"> */</div><div class="line">function scrollTo(to, duration) &#123;</div><div class="line">    if (duration &lt; 0) &#123;</div><div class="line">        setScrollTop(to);</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line">    var diff = to - getScrollTop();</div><div class="line">    if (diff === 0) return</div><div class="line">    var step = diff / duration * 10;</div><div class="line">    requestAnimationFrame(</div><div class="line">        function () &#123;</div><div class="line">            if (Math.abs(step) &gt; Math.abs(diff)) &#123;</div><div class="line">                setScrollTop(getScrollTop() + diff);</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line">            setScrollTop(getScrollTop() + step);</div><div class="line">            if (diff &gt; 0 &amp;&amp; getScrollTop() &gt;= to || diff &lt; 0 &amp;&amp; getScrollTop() &lt;= to) &#123;</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line">            scrollTo(to, duration - 16);</div><div class="line">        &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-4-setScrollTop"><a href="#5-4-setScrollTop" class="headerlink" title="5.4 setScrollTop"></a>5.4 setScrollTop</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 设置滚动条距顶部的距离</div><div class="line"> */</div><div class="line">function setScrollTop(value) &#123;</div><div class="line">    window.scrollTo(0, value);</div><div class="line">    return value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-Keycode"><a href="#6-Keycode" class="headerlink" title="6.Keycode"></a>6.Keycode</h3><h4 id="6-1-getKeyName"><a href="#6-1-getKeyName" class="headerlink" title="6.1 getKeyName"></a>6.1 getKeyName</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line">var keyCodeMap = &#123;</div><div class="line">    8: &apos;Backspace&apos;,</div><div class="line">    9: &apos;Tab&apos;,</div><div class="line">    13: &apos;Enter&apos;,</div><div class="line">    16: &apos;Shift&apos;,</div><div class="line">    17: &apos;Ctrl&apos;,</div><div class="line">    18: &apos;Alt&apos;,</div><div class="line">    19: &apos;Pause&apos;,</div><div class="line">    20: &apos;Caps Lock&apos;,</div><div class="line">    27: &apos;Escape&apos;,</div><div class="line">    32: &apos;Space&apos;,</div><div class="line">    33: &apos;Page Up&apos;,</div><div class="line">    34: &apos;Page Down&apos;,</div><div class="line">    35: &apos;End&apos;,</div><div class="line">    36: &apos;Home&apos;,</div><div class="line">    37: &apos;Left&apos;,</div><div class="line">    38: &apos;Up&apos;,</div><div class="line">    39: &apos;Right&apos;,</div><div class="line">    40: &apos;Down&apos;,</div><div class="line">    42: &apos;Print Screen&apos;,</div><div class="line">    45: &apos;Insert&apos;,</div><div class="line">    46: &apos;Delete&apos;,</div><div class="line"></div><div class="line">    48: &apos;0&apos;,</div><div class="line">    49: &apos;1&apos;,</div><div class="line">    50: &apos;2&apos;,</div><div class="line">    51: &apos;3&apos;,</div><div class="line">    52: &apos;4&apos;,</div><div class="line">    53: &apos;5&apos;,</div><div class="line">    54: &apos;6&apos;,</div><div class="line">    55: &apos;7&apos;,</div><div class="line">    56: &apos;8&apos;,</div><div class="line">    57: &apos;9&apos;,</div><div class="line"></div><div class="line">    65: &apos;A&apos;,</div><div class="line">    66: &apos;B&apos;,</div><div class="line">    67: &apos;C&apos;,</div><div class="line">    68: &apos;D&apos;,</div><div class="line">    69: &apos;E&apos;,</div><div class="line">    70: &apos;F&apos;,</div><div class="line">    71: &apos;G&apos;,</div><div class="line">    72: &apos;H&apos;,</div><div class="line">    73: &apos;I&apos;,</div><div class="line">    74: &apos;J&apos;,</div><div class="line">    75: &apos;K&apos;,</div><div class="line">    76: &apos;L&apos;,</div><div class="line">    77: &apos;M&apos;,</div><div class="line">    78: &apos;N&apos;,</div><div class="line">    79: &apos;O&apos;,</div><div class="line">    80: &apos;P&apos;,</div><div class="line">    81: &apos;Q&apos;,</div><div class="line">    82: &apos;R&apos;,</div><div class="line">    83: &apos;S&apos;,</div><div class="line">    84: &apos;T&apos;,</div><div class="line">    85: &apos;U&apos;,</div><div class="line">    86: &apos;V&apos;,</div><div class="line">    87: &apos;W&apos;,</div><div class="line">    88: &apos;X&apos;,</div><div class="line">    89: &apos;Y&apos;,</div><div class="line">    90: &apos;Z&apos;,</div><div class="line"></div><div class="line">    91: &apos;Windows&apos;,</div><div class="line">    93: &apos;Right Click&apos;,</div><div class="line"></div><div class="line">    96: &apos;Numpad 0&apos;,</div><div class="line">    97: &apos;Numpad 1&apos;,</div><div class="line">    98: &apos;Numpad 2&apos;,</div><div class="line">    99: &apos;Numpad 3&apos;,</div><div class="line">    100: &apos;Numpad 4&apos;,</div><div class="line">    101: &apos;Numpad 5&apos;,</div><div class="line">    102: &apos;Numpad 6&apos;,</div><div class="line">    103: &apos;Numpad 7&apos;,</div><div class="line">    104: &apos;Numpad 8&apos;,</div><div class="line">    105: &apos;Numpad 9&apos;,</div><div class="line">    106: &apos;Numpad *&apos;,</div><div class="line">    107: &apos;Numpad +&apos;,</div><div class="line">    109: &apos;Numpad -&apos;,</div><div class="line">    110: &apos;Numpad .&apos;,</div><div class="line">    111: &apos;Numpad /&apos;,</div><div class="line"></div><div class="line">    112: &apos;F1&apos;,</div><div class="line">    113: &apos;F2&apos;,</div><div class="line">    114: &apos;F3&apos;,</div><div class="line">    115: &apos;F4&apos;,</div><div class="line">    116: &apos;F5&apos;,</div><div class="line">    117: &apos;F6&apos;,</div><div class="line">    118: &apos;F7&apos;,</div><div class="line">    119: &apos;F8&apos;,</div><div class="line">    120: &apos;F9&apos;,</div><div class="line">    121: &apos;F10&apos;,</div><div class="line">    122: &apos;F11&apos;,</div><div class="line">    123: &apos;F12&apos;,</div><div class="line"></div><div class="line">    144: &apos;Num Lock&apos;,</div><div class="line">    145: &apos;Scroll Lock&apos;,</div><div class="line">    182: &apos;My Computer&apos;,</div><div class="line">    183: &apos;My Calculator&apos;,</div><div class="line">    186: &apos;;&apos;,</div><div class="line">    187: &apos;=&apos;,</div><div class="line">    188: &apos;,&apos;,</div><div class="line">    189: &apos;-&apos;,</div><div class="line">    190: &apos;.&apos;,</div><div class="line">    191: &apos;/&apos;,</div><div class="line">    192: &apos;`&apos;,</div><div class="line">    219: &apos;[&apos;,</div><div class="line">    220: &apos;\\&apos;,</div><div class="line">    221: &apos;]&apos;,</div><div class="line">    222: &apos;\&apos;&apos;</div><div class="line">&#125;;</div><div class="line">/**</div><div class="line"> * @desc 根据keycode获得键名</div><div class="line"> * @param  &#123;Number&#125; keycode </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function getKeyName(keycode) &#123;</div><div class="line">    if (keyCodeMap[keycode]) &#123;</div><div class="line">        return keyCodeMap[keycode];</div><div class="line">    &#125; else &#123;</div><div class="line">        console.log(&apos;Unknow Key(Key Code:&apos; + keycode + &apos;)&apos;);</div><div class="line">        return &apos;&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="7-Object"><a href="#7-Object" class="headerlink" title="7.Object"></a>7.Object</h3><h4 id="7-1-deepClone"><a href="#7-1-deepClone" class="headerlink" title="7.1 deepClone"></a>7.1 deepClone</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">    /**</div><div class="line">     * @desc 深拷贝，支持常见类型</div><div class="line">     * @param &#123;Any&#125; values</div><div class="line">     */</div><div class="line">    function extend(obj)&#123; //extend -&gt;深度克隆</div><div class="line">//      console.log(obj.push);</div><div class="line">        //var toStr = Object.prototype.toString;</div><div class="line">        //var o = toStr.call(obj) === &apos;[object Array]&apos;?[]:&#123;&#125;;</div><div class="line">        var o = obj.push?[]:&#123;&#125;;</div><div class="line">        for(var attr in obj)&#123;</div><div class="line">            //判断obj[attr]是不是对象类型的，如果是就再循环。</div><div class="line">            if(typeof obj[attr] === &apos;object&apos;)&#123;</div><div class="line">                o[attr] =  extend(obj[attr]);</div><div class="line">            &#125;else&#123;</div><div class="line">                o[attr] = obj[attr];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return o;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    var obj2 = extend(obj);</div></pre></td></tr></table></figure>
<h4 id="7-2-isEmptyObject"><a href="#7-2-isEmptyObject" class="headerlink" title="7.2 isEmptyObject"></a>7.2 isEmptyObject</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   判断`obj`是否为空</div><div class="line"> * @param  &#123;Object&#125; obj</div><div class="line"> * @return &#123;Boolean&#125;</div><div class="line"> */</div><div class="line">function isEmptyObject(obj) &#123;</div><div class="line">    if (!obj || typeof obj !== &apos;object&apos; || Array.isArray(obj))</div><div class="line">        return false</div><div class="line">    return !Object.keys(obj).length</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="8-Random"><a href="#8-Random" class="headerlink" title="8.Random"></a>8.Random</h3><h4 id="8-1-randomColor"><a href="#8-1-randomColor" class="headerlink" title="8.1 randomColor"></a>8.1 randomColor</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 随机生成颜色</div><div class="line"> * @return &#123;String&#125; </div><div class="line"> */</div><div class="line">function randomColor() &#123;</div><div class="line">    return &apos;#&apos; + (&apos;00000&apos; + (Math.random() * 0x1000000 &lt;&lt; 0).toString(16)).slice(-6);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="8-2-randomNum"><a href="#8-2-randomNum" class="headerlink" title="8.2 randomNum "></a>8.2 randomNum </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 生成指定范围随机数</div><div class="line"> * @param  &#123;Number&#125; min </div><div class="line"> * @param  &#123;Number&#125; max </div><div class="line"> * @return &#123;Number&#125; </div><div class="line"> */</div><div class="line">function randomNum(min, max) &#123;</div><div class="line">    return Math.floor(min + Math.random() * (max - min));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="9-Regexp"><a href="#9-Regexp" class="headerlink" title="9.Regexp"></a>9.Regexp</h3><h4 id="9-1-isEmail"><a href="#9-1-isEmail" class="headerlink" title="9.1 isEmail"></a>9.1 isEmail</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   判断是否为邮箱地址</div><div class="line"> * @param  &#123;String&#125;  str</div><div class="line"> * @return &#123;Boolean&#125; </div><div class="line"> */</div><div class="line">function isEmail(str) &#123;</div><div class="line">    return /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-2-isIdCard"><a href="#9-2-isIdCard" class="headerlink" title="9.2 isIdCard"></a>9.2 isIdCard</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc  判断是否为身份证号</div><div class="line"> * @param  &#123;String|Number&#125; str </div><div class="line"> * @return &#123;Boolean&#125;</div><div class="line"> */</div><div class="line">function isIdCard(str) &#123;</div><div class="line">    return /^(^[1-9]\d&#123;7&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;$)|(^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d&#123;4&#125;)|\d&#123;3&#125;[Xx])$)$/.test(str)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-3-isPhoneNum"><a href="#9-3-isPhoneNum" class="headerlink" title="9.3 isPhoneNum"></a>9.3 isPhoneNum</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   判断是否为手机号</div><div class="line"> * @param  &#123;String|Number&#125; str </div><div class="line"> * @return &#123;Boolean&#125; </div><div class="line"> */</div><div class="line">function isPhoneNum(str) &#123;</div><div class="line">    return /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]&#123;8&#125;$/.test(str)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-4-isUrl"><a href="#9-4-isUrl" class="headerlink" title="9.4 isUrl"></a>9.4 isUrl</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   判断是否为URL地址</div><div class="line"> * @param  &#123;String&#125; str </div><div class="line"> * @return &#123;Boolean&#125;</div><div class="line"> */</div><div class="line">function isUrl(str) &#123;</div><div class="line">    return /[-a-zA-Z0-9@:%._\+~#=]&#123;2,256&#125;\.[a-z]&#123;2,6&#125;\b([-a-zA-Z0-9@:%_\+.~#?&amp;//=]*)/i.test(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="10-String"><a href="#10-String" class="headerlink" title="10.String"></a>10.String</h3><h4 id="10-1-digitUppercase"><a href="#10-1-digitUppercase" class="headerlink" title="10.1 digitUppercase"></a>10.1 digitUppercase</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   现金额转大写</div><div class="line"> * @param  &#123;Number&#125; n </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function digitUppercase(n) &#123;</div><div class="line">    var fraction = [&apos;角&apos;, &apos;分&apos;];</div><div class="line">    var digit = [</div><div class="line">        &apos;零&apos;, &apos;壹&apos;, &apos;贰&apos;, &apos;叁&apos;, &apos;肆&apos;,</div><div class="line">        &apos;伍&apos;, &apos;陆&apos;, &apos;柒&apos;, &apos;捌&apos;, &apos;玖&apos;</div><div class="line">    ];</div><div class="line">    var unit = [</div><div class="line">        [&apos;元&apos;, &apos;万&apos;, &apos;亿&apos;],</div><div class="line">        [&apos;&apos;, &apos;拾&apos;, &apos;佰&apos;, &apos;仟&apos;]</div><div class="line">    ];</div><div class="line">    var head = n &lt; 0 ? &apos;欠&apos; : &apos;&apos;;</div><div class="line">    n = Math.abs(n);</div><div class="line">    var s = &apos;&apos;;</div><div class="line">    for (var i = 0; i &lt; fraction.length; i++) &#123;</div><div class="line">        s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, &apos;&apos;);</div><div class="line">    &#125;</div><div class="line">    s = s || &apos;整&apos;;</div><div class="line">    n = Math.floor(n);</div><div class="line">    for (var i = 0; i &lt; unit[0].length &amp;&amp; n &gt; 0; i++) &#123;</div><div class="line">        var p = &apos;&apos;;</div><div class="line">        for (var j = 0; j &lt; unit[1].length &amp;&amp; n &gt; 0; j++) &#123;</div><div class="line">            p = digit[n % 10] + unit[1][j] + p;</div><div class="line">            n = Math.floor(n / 10);</div><div class="line">        &#125;</div><div class="line">        s = p.replace(/(零.)*零$/, &apos;&apos;).replace(/^$/, &apos;零&apos;) + unit[0][i] + s;</div><div class="line">    &#125;</div><div class="line">    return head + s.replace(/(零.)*零元/, &apos;元&apos;)</div><div class="line">        .replace(/(零.)+/g, &apos;零&apos;)</div><div class="line">        .replace(/^整$/, &apos;零元整&apos;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="11-Support"><a href="#11-Support" class="headerlink" title="11.Support"></a>11.Support</h3><h4 id="11-1-isSupportWebP"><a href="#11-1-isSupportWebP" class="headerlink" title="11.1 isSupportWebP"></a>11.1 isSupportWebP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc 判断浏览器是否支持webP格式图片</div><div class="line"> * @return &#123;Boolean&#125; </div><div class="line"> */</div><div class="line">function isSupportWebP() &#123;</div><div class="line">    return !![].map &amp;&amp; document.createElement(&apos;canvas&apos;).toDataURL(&apos;image/webp&apos;).indexOf(&apos;data:image/webp&apos;) == 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="12-Time"><a href="#12-Time" class="headerlink" title="12.Time"></a>12.Time</h3><h4 id="12-1-formatPassTime"><a href="#12-1-formatPassTime" class="headerlink" title="12.1 formatPassTime"></a>12.1 formatPassTime</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * @desc   格式化$&#123;startTime&#125;距现在的已过时间</div><div class="line"> * @param  &#123;Date&#125; startTime </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function formatPassTime(startTime) &#123;</div><div class="line">    var currentTime = Date.parse(new Date()),</div><div class="line">        time = currentTime - startTime,</div><div class="line">        day = parseInt(time / (1000 * 60 * 60 * 24)),</div><div class="line">        hour = parseInt(time / (1000 * 60 * 60)),</div><div class="line">        min = parseInt(time / (1000 * 60)),</div><div class="line">        month = parseInt(day / 30),</div><div class="line">        year = parseInt(month / 12);</div><div class="line">    if (year) return year + &quot;年前&quot;</div><div class="line">    if (month) return month + &quot;个月前&quot;</div><div class="line">    if (day) return day + &quot;天前&quot;</div><div class="line">    if (hour) return hour + &quot;小时前&quot;</div><div class="line">    if (min) return min + &quot;分钟前&quot;</div><div class="line">    else return &apos;刚刚&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="12-2-formatRemainTime"><a href="#12-2-formatRemainTime" class="headerlink" title="12.2 formatRemainTime"></a>12.2 formatRemainTime</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   格式化现在距$&#123;endTime&#125;的剩余时间</div><div class="line"> * @param  &#123;Date&#125; endTime  </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function formatRemainTime(endTime) &#123;</div><div class="line">    var startDate = new Date(); //开始时间</div><div class="line">    var endDate = new Date(endTime); //结束时间</div><div class="line">    var t = endDate.getTime() - startDate.getTime(); //时间差</div><div class="line">    var d = 0,</div><div class="line">        h = 0,</div><div class="line">        m = 0,</div><div class="line">        s = 0;</div><div class="line">    if (t &gt;= 0) &#123;</div><div class="line">        d = Math.floor(t / 1000 / 3600 / 24);</div><div class="line">        h = Math.floor(t / 1000 / 60 / 60 % 24);</div><div class="line">        m = Math.floor(t / 1000 / 60 % 60);</div><div class="line">        s = Math.floor(t / 1000 % 60);</div><div class="line">    &#125;</div><div class="line">    return d + &quot;天 &quot; + h + &quot;小时 &quot; + m + &quot;分钟 &quot; + s + &quot;秒&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="13-Url"><a href="#13-Url" class="headerlink" title="13.Url"></a>13.Url</h3><h4 id="13-1-parseQueryString"><a href="#13-1-parseQueryString" class="headerlink" title="13.1 parseQueryString"></a>13.1 parseQueryString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   url参数转对象</div><div class="line"> * @param  &#123;String&#125; url  default: window.location.href</div><div class="line"> * @return &#123;Object&#125; </div><div class="line"> */</div><div class="line">function parseQueryString(url) &#123;</div><div class="line">    url = url == null ? window.location.href : url</div><div class="line">    var search = url.substring(url.lastIndexOf(&apos;?&apos;) + 1)</div><div class="line">    if (!search) &#123;</div><div class="line">        return &#123;&#125;</div><div class="line">    &#125;</div><div class="line">    return JSON.parse(&apos;&#123;&quot;&apos; + decodeURIComponent(search).replace(/&quot;/g, &apos;\\&quot;&apos;).replace(/&amp;/g, &apos;&quot;,&quot;&apos;).replace(/=/g, &apos;&quot;:&quot;&apos;) + &apos;&quot;&#125;&apos;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="13-2-stringfyQueryString"><a href="#13-2-stringfyQueryString" class="headerlink" title="13.2 stringfyQueryString"></a>13.2 stringfyQueryString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * @desc   对象序列化</div><div class="line"> * @param  &#123;Object&#125; obj </div><div class="line"> * @return &#123;String&#125;</div><div class="line"> */</div><div class="line">function stringfyQueryString(obj) &#123;</div><div class="line">    if (!obj) return &apos;&apos;;</div><div class="line">    var pairs = [];</div><div class="line"></div><div class="line">    for (var key in obj) &#123;</div><div class="line">        var value = obj[key];</div><div class="line"></div><div class="line">        if (value instanceof Array) &#123;</div><div class="line">            for (var i = 0; i &lt; value.length; ++i) &#123;</div><div class="line">                pairs.push(encodeURIComponent(key + &apos;[&apos; + i + &apos;]&apos;) + &apos;=&apos; + encodeURIComponent(value[i]));</div><div class="line">            &#125;</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        pairs.push(encodeURIComponent(key) + &apos;=&apos; + encodeURIComponent(obj[key]));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return pairs.join(&apos;&amp;&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>作者：SlaneYang</li>
<li><a href="https://segmentfault.com/a/1190000011966867" target="_blank" rel="external">https://segmentfault.com/a/1190000011966867</a></li>
</ul>
</blockquote>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
        
        
  <nav class="post-nav">
    
    
      <a class="next" href="/blogs/2017/12/01/loadding/">
        <span class="next-text nav-default">NEXT</span>
        <span class="prev-text nav-mobile">NEXT</span>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
  </div>


<div class="copyright">

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Songzhiguo powered by Hexo</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  



    
  





  
    <script type="text/javascript" src="/blogs/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/blogs/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/blogs/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/blogs/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/blogs/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
