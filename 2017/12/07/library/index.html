<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="javascript武器库"/>













  <link rel="alternate" href="/blogs/atom.xml" title="Song">




  <link rel="shortcut icon" type="image/x-icon" href="/blogs/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://songzhiguo.github.io/blogs/2017/12/07/library/"/>


<link rel="stylesheet" type="text/css" href="/blogs/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/blogs/lib/fancybox/jquery.fancybox.css" />




  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









    <title> javascript武器库 - Song </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/blogs/." class="logo">Song</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/blogs/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/blogs/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/blogs/." class="logo">Song</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/blogs/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/blogs/archives/">
            
            
              归档
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          javascript武器库
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-12-07
        </span>
        
          <div class="post-category">
            
              <a href="/blogs/categories/转载收藏/">转载收藏</a>
            
          </div>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#常用函数总汇"><span class="toc-text">常用函数总汇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-text">Array</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1arrayEqual"><span class="toc-text">1.1arrayEqual</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Class"><span class="toc-text">2.Class</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-hasClass"><span class="toc-text">2.1 hasClass</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-addClass"><span class="toc-text">2.2 addClass</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-removeClass"><span class="toc-text">2.3 removeClass</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Cookie"><span class="toc-text">3.Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-getCookie"><span class="toc-text">3.1 getCookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-removeCookie"><span class="toc-text">3.2 removeCookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-setCookie"><span class="toc-text">3.3 setCookie</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Device"><span class="toc-text">4.Device</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-getExplore"><span class="toc-text">4.1 getExplore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-getOS"><span class="toc-text">4.2 getOS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dom"><span class="toc-text">Dom</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-getScrollTop"><span class="toc-text">5.1 getScrollTop</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-offset"><span class="toc-text">5.2 offset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-scrollTo"><span class="toc-text">5.3 scrollTo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-setScrollTop"><span class="toc-text">5.4 setScrollTop</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Keycode"><span class="toc-text">6.Keycode</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-getKeyName"><span class="toc-text">6.1 getKeyName</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Object"><span class="toc-text">7.Object</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-deepClone"><span class="toc-text">7.1 deepClone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-isEmptyObject"><span class="toc-text">7.2 isEmptyObject</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Random"><span class="toc-text">8.Random</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-randomColor"><span class="toc-text">8.1 randomColor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-randomNum"><span class="toc-text">8.2 randomNum </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-Regexp"><span class="toc-text">9.Regexp</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-isEmail"><span class="toc-text">9.1 isEmail</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-isIdCard"><span class="toc-text">9.2 isIdCard</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-isPhoneNum"><span class="toc-text">9.3 isPhoneNum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-isUrl"><span class="toc-text">9.4 isUrl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-String"><span class="toc-text">10.String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-digitUppercase"><span class="toc-text">10.1 digitUppercase</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Support"><span class="toc-text">11.Support</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-isSupportWebP"><span class="toc-text">11.1 isSupportWebP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Time"><span class="toc-text">12.Time</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-formatPassTime"><span class="toc-text">12.1 formatPassTime</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-formatRemainTime"><span class="toc-text">12.2 formatRemainTime</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-Url"><span class="toc-text">13.Url</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-parseQueryString"><span class="toc-text">13.1 parseQueryString</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-stringfyQueryString"><span class="toc-text">13.2 stringfyQueryString</span></a></li></ol></li></ol></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <blockquote>
<ul>
<li>自己打造一把趁手的武器，高效率完成前端业务代码。</li>
</ul>
</blockquote>
<a id="more"></a>
<p><img src="https://songzhiguo.github.io/lib/images/2964183279-5a06f5964878b_articlex.jpg" alt=""></p>
<h2 id="常用函数总汇"><a href="#常用函数总汇" class="headerlink" title="常用函数总汇"></a>常用函数总汇</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><h4 id="1-1arrayEqual"><a href="#1-1arrayEqual" class="headerlink" title="1.1arrayEqual"></a>1.1arrayEqual</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 判断两个数组是否相等</span></div><div class="line"><span class="comment"> * @param &#123;Array&#125; arr1 </span></div><div class="line"><span class="comment"> * @param &#123;Array&#125; arr2 </span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayEqual</span>(<span class="params">arr1, arr2</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (arr1 === arr2) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">if</span> (arr1.length != arr2.length) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr1.length; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (arr1[i] !== arr2[i]) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-Class"><a href="#2-Class" class="headerlink" title="2.Class"></a>2.Class</h3><h4 id="2-1-hasClass"><a href="#2-1-hasClass" class="headerlink" title="2.1 hasClass"></a>2.1 hasClass</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 判断元素是否有某个class</span></div><div class="line"><span class="comment"> * @param &#123;HTMLElement&#125; ele </span></div><div class="line"><span class="comment"> * @param &#123;String&#125; cls </span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">ele, cls</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>)).test(ele.className);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-2-addClass"><a href="#2-2-addClass" class="headerlink" title="2.2 addClass"></a>2.2 addClass</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   为元素添加class</span></div><div class="line"><span class="comment"> * @param  &#123;HTMLElement&#125; ele </span></div><div class="line"><span class="comment"> * @param  &#123;String&#125; cls </span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> hasClass = <span class="built_in">require</span>(<span class="string">'./hasClass'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">ele, cls</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!hasClass(ele, cls)) &#123;</div><div class="line">        ele.className += <span class="string">' '</span> + cls;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-3-removeClass"><a href="#2-3-removeClass" class="headerlink" title="2.3 removeClass"></a>2.3 removeClass</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 为元素移除class</span></div><div class="line"><span class="comment"> * @param &#123;HTMLElement&#125; ele </span></div><div class="line"><span class="comment"> * @param &#123;String&#125; cls </span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> hasClass = <span class="built_in">require</span>(<span class="string">'./hasClass'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">ele, cls</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (hasClass(ele, cls)) &#123;</div><div class="line">        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>);</div><div class="line">        ele.className = ele.className.replace(reg, <span class="string">' '</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-Cookie"><a href="#3-Cookie" class="headerlink" title="3.Cookie"></a>3.Cookie</h3><h4 id="3-1-getCookie"><a href="#3-1-getCookie" class="headerlink" title="3.1 getCookie"></a>3.1 getCookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 根据name读取cookie</span></div><div class="line"><span class="comment"> * @param  &#123;String&#125; name </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.replace(<span class="regexp">/\s/g</span>, <span class="string">""</span>).split(<span class="string">';'</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> tempArr = arr[i].split(<span class="string">'='</span>);</div><div class="line">        <span class="keyword">if</span> (tempArr[<span class="number">0</span>] == name) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(tempArr[<span class="number">1</span>]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-2-removeCookie"><a href="#3-2-removeCookie" class="headerlink" title="3.2 removeCookie"></a>3.2 removeCookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> setCookie = <span class="built_in">require</span>(<span class="string">'./setCookie'</span>);</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 根据name删除cookie</span></div><div class="line"><span class="comment"> * @param  &#123;String&#125; name </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeCookie</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="comment">// 设置已过期，系统会立刻删除cookie</span></div><div class="line">    setCookie(name, <span class="string">'1'</span>, <span class="number">-1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-3-setCookie"><a href="#3-3-setCookie" class="headerlink" title="3.3 setCookie"></a>3.3 setCookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc  设置Cookie</span></div><div class="line"><span class="comment"> * @param &#123;String&#125; name </span></div><div class="line"><span class="comment"> * @param &#123;String&#125; value </span></div><div class="line"><span class="comment"> * @param &#123;Number&#125; days </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, days</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    date.setDate(date.getDate() + days);</div><div class="line">    <span class="built_in">document</span>.cookie = name + <span class="string">'='</span> + value + <span class="string">';expires='</span> + date;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-Device"><a href="#4-Device" class="headerlink" title="4.Device"></a>4.Device</h3><h4 id="4-1-getExplore"><a href="#4-1-getExplore" class="headerlink" title="4.1 getExplore"></a>4.1 getExplore</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 获取浏览器类型和版本</span></div><div class="line"><span class="comment"> * @return &#123;String&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getExplore</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> sys = &#123;&#125;,</div><div class="line">        ua = navigator.userAgent.toLowerCase(),</div><div class="line">        s;</div><div class="line">    (s = ua.match(<span class="regexp">/rv:([\d.]+)\) like gecko/</span>)) ? sys.ie = s[<span class="number">1</span>]:</div><div class="line">        (s = ua.match(<span class="regexp">/msie ([\d\.]+)/</span>)) ? sys.ie = s[<span class="number">1</span>] :</div><div class="line">        (s = ua.match(<span class="regexp">/edge\/([\d\.]+)/</span>)) ? sys.edge = s[<span class="number">1</span>] :</div><div class="line">        (s = ua.match(<span class="regexp">/firefox\/([\d\.]+)/</span>)) ? sys.firefox = s[<span class="number">1</span>] :</div><div class="line">        (s = ua.match(<span class="regexp">/(?:opera|opr).([\d\.]+)/</span>)) ? sys.opera = s[<span class="number">1</span>] :</div><div class="line">        (s = ua.match(<span class="regexp">/chrome\/([\d\.]+)/</span>)) ? sys.chrome = s[<span class="number">1</span>] :</div><div class="line">        (s = ua.match(<span class="regexp">/version\/([\d\.]+).*safari/</span>)) ? sys.safari = s[<span class="number">1</span>] : <span class="number">0</span>;</div><div class="line">    <span class="comment">// 根据关系进行判断</span></div><div class="line">    <span class="keyword">if</span> (sys.ie) <span class="keyword">return</span> (<span class="string">'IE: '</span> + sys.ie)</div><div class="line">    <span class="keyword">if</span> (sys.edge) <span class="keyword">return</span> (<span class="string">'EDGE: '</span> + sys.edge)</div><div class="line">    <span class="keyword">if</span> (sys.firefox) <span class="keyword">return</span> (<span class="string">'Firefox: '</span> + sys.firefox)</div><div class="line">    <span class="keyword">if</span> (sys.chrome) <span class="keyword">return</span> (<span class="string">'Chrome: '</span> + sys.chrome)</div><div class="line">    <span class="keyword">if</span> (sys.opera) <span class="keyword">return</span> (<span class="string">'Opera: '</span> + sys.opera)</div><div class="line">    <span class="keyword">if</span> (sys.safari) <span class="keyword">return</span> (<span class="string">'Safari: '</span> + sys.safari)</div><div class="line">    <span class="keyword">return</span> <span class="string">'Unkonwn'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="4-2-getOS"><a href="#4-2-getOS" class="headerlink" title="4.2 getOS"></a>4.2 getOS</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 获取操作系统类型</span></div><div class="line"><span class="comment"> * @return &#123;String&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOS</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> userAgent = <span class="string">'navigator'</span> <span class="keyword">in</span> <span class="built_in">window</span> &amp;&amp; <span class="string">'userAgent'</span> <span class="keyword">in</span> navigator &amp;&amp; navigator.userAgent.toLowerCase() || <span class="string">''</span>;</div><div class="line">    <span class="keyword">var</span> vendor = <span class="string">'navigator'</span> <span class="keyword">in</span> <span class="built_in">window</span> &amp;&amp; <span class="string">'vendor'</span> <span class="keyword">in</span> navigator &amp;&amp; navigator.vendor.toLowerCase() || <span class="string">''</span>;</div><div class="line">    <span class="keyword">var</span> appVersion = <span class="string">'navigator'</span> <span class="keyword">in</span> <span class="built_in">window</span> &amp;&amp; <span class="string">'appVersion'</span> <span class="keyword">in</span> navigator &amp;&amp; navigator.appVersion.toLowerCase() || <span class="string">''</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/mac/i</span>.test(appVersion)) <span class="keyword">return</span> <span class="string">'MacOSX'</span></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/win/i</span>.test(appVersion)) <span class="keyword">return</span> <span class="string">'windows'</span></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/linux/i</span>.test(appVersion)) <span class="keyword">return</span> <span class="string">'linux'</span></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/iphone/i</span>.test(userAgent) || <span class="regexp">/ipad/i</span>.test(userAgent) || <span class="regexp">/ipod/i</span>.test(userAgent)) <span class="string">'ios'</span></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/android/i</span>.test(userAgent)) <span class="keyword">return</span> <span class="string">'android'</span></div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/win/i</span>.test(appVersion) &amp;&amp; <span class="regexp">/phone/i</span>.test(userAgent)) <span class="keyword">return</span> <span class="string">'windowsPhone'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Dom"><a href="#Dom" class="headerlink" title="Dom"></a>Dom</h3><h4 id="5-1-getScrollTop"><a href="#5-1-getScrollTop" class="headerlink" title="5.1 getScrollTop"></a>5.1 getScrollTop</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 获取滚动条距顶部的距离</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollTop</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (<span class="built_in">document</span>.documentElement &amp;&amp; <span class="built_in">document</span>.documentElement.scrollTop) || <span class="built_in">document</span>.body.scrollTop;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-2-offset"><a href="#5-2-offset" class="headerlink" title="5.2 offset"></a>5.2 offset</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc  获取一个元素的距离文档(document)的位置，类似jQ中的offset()</span></div><div class="line"><span class="comment"> * @param &#123;HTMLElement&#125; ele </span></div><div class="line"><span class="comment"> * @returns &#123; &#123;left: number, top: number&#125; &#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">offset</span>(<span class="params">ele</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pos = &#123;</div><div class="line">        left: <span class="number">0</span>,</div><div class="line">        top: <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">while</span> (ele) &#123;</div><div class="line">        pos.left += ele.offsetLeft;</div><div class="line">        pos.top += ele.offsetTop;</div><div class="line">        ele = ele.offsetParent;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> pos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-3-scrollTo"><a href="#5-3-scrollTo" class="headerlink" title="5.3 scrollTo"></a>5.3 scrollTo</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getScrollTop = <span class="built_in">require</span>(<span class="string">'./getScrollTop'</span>);</div><div class="line"><span class="keyword">var</span> setScrollTop = <span class="built_in">require</span>(<span class="string">'./setScrollTop'</span>);</div><div class="line"><span class="keyword">var</span> requestAnimFrame = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.requestAnimationFrame ||</div><div class="line">        <span class="built_in">window</span>.webkitRequestAnimationFrame ||</div><div class="line">        <span class="built_in">window</span>.mozRequestAnimationFrame ||</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</div><div class="line">            <span class="built_in">window</span>.setTimeout(callback, <span class="number">1000</span> / <span class="number">60</span>);</div><div class="line">        &#125;;</div><div class="line">&#125;)();</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc  在$&#123;duration&#125;时间内，滚动条平滑滚动到$&#123;to&#125;指定位置</span></div><div class="line"><span class="comment"> * @param &#123;Number&#125; to </span></div><div class="line"><span class="comment"> * @param &#123;Number&#125; duration </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollTo</span>(<span class="params">to, duration</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (duration &lt; <span class="number">0</span>) &#123;</div><div class="line">        setScrollTop(to);</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> diff = to - getScrollTop();</div><div class="line">    <span class="keyword">if</span> (diff === <span class="number">0</span>) <span class="keyword">return</span></div><div class="line">    <span class="keyword">var</span> step = diff / duration * <span class="number">10</span>;</div><div class="line">    requestAnimationFrame(</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(step) &gt; <span class="built_in">Math</span>.abs(diff)) &#123;</div><div class="line">                setScrollTop(getScrollTop() + diff);</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            setScrollTop(getScrollTop() + step);</div><div class="line">            <span class="keyword">if</span> (diff &gt; <span class="number">0</span> &amp;&amp; getScrollTop() &gt;= to || diff &lt; <span class="number">0</span> &amp;&amp; getScrollTop() &lt;= to) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            scrollTo(to, duration - <span class="number">16</span>);</div><div class="line">        &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-4-setScrollTop"><a href="#5-4-setScrollTop" class="headerlink" title="5.4 setScrollTop"></a>5.4 setScrollTop</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 设置滚动条距顶部的距离</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setScrollTop</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, value);</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-Keycode"><a href="#6-Keycode" class="headerlink" title="6.Keycode"></a>6.Keycode</h3><h4 id="6-1-getKeyName"><a href="#6-1-getKeyName" class="headerlink" title="6.1 getKeyName"></a>6.1 getKeyName</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> keyCodeMap = &#123;</div><div class="line">    <span class="number">8</span>: <span class="string">'Backspace'</span>,</div><div class="line">    <span class="number">9</span>: <span class="string">'Tab'</span>,</div><div class="line">    <span class="number">13</span>: <span class="string">'Enter'</span>,</div><div class="line">    <span class="number">16</span>: <span class="string">'Shift'</span>,</div><div class="line">    <span class="number">17</span>: <span class="string">'Ctrl'</span>,</div><div class="line">    <span class="number">18</span>: <span class="string">'Alt'</span>,</div><div class="line">    <span class="number">19</span>: <span class="string">'Pause'</span>,</div><div class="line">    <span class="number">20</span>: <span class="string">'Caps Lock'</span>,</div><div class="line">    <span class="number">27</span>: <span class="string">'Escape'</span>,</div><div class="line">    <span class="number">32</span>: <span class="string">'Space'</span>,</div><div class="line">    <span class="number">33</span>: <span class="string">'Page Up'</span>,</div><div class="line">    <span class="number">34</span>: <span class="string">'Page Down'</span>,</div><div class="line">    <span class="number">35</span>: <span class="string">'End'</span>,</div><div class="line">    <span class="number">36</span>: <span class="string">'Home'</span>,</div><div class="line">    <span class="number">37</span>: <span class="string">'Left'</span>,</div><div class="line">    <span class="number">38</span>: <span class="string">'Up'</span>,</div><div class="line">    <span class="number">39</span>: <span class="string">'Right'</span>,</div><div class="line">    <span class="number">40</span>: <span class="string">'Down'</span>,</div><div class="line">    <span class="number">42</span>: <span class="string">'Print Screen'</span>,</div><div class="line">    <span class="number">45</span>: <span class="string">'Insert'</span>,</div><div class="line">    <span class="number">46</span>: <span class="string">'Delete'</span>,</div><div class="line"></div><div class="line">    <span class="number">48</span>: <span class="string">'0'</span>,</div><div class="line">    <span class="number">49</span>: <span class="string">'1'</span>,</div><div class="line">    <span class="number">50</span>: <span class="string">'2'</span>,</div><div class="line">    <span class="number">51</span>: <span class="string">'3'</span>,</div><div class="line">    <span class="number">52</span>: <span class="string">'4'</span>,</div><div class="line">    <span class="number">53</span>: <span class="string">'5'</span>,</div><div class="line">    <span class="number">54</span>: <span class="string">'6'</span>,</div><div class="line">    <span class="number">55</span>: <span class="string">'7'</span>,</div><div class="line">    <span class="number">56</span>: <span class="string">'8'</span>,</div><div class="line">    <span class="number">57</span>: <span class="string">'9'</span>,</div><div class="line"></div><div class="line">    <span class="number">65</span>: <span class="string">'A'</span>,</div><div class="line">    <span class="number">66</span>: <span class="string">'B'</span>,</div><div class="line">    <span class="number">67</span>: <span class="string">'C'</span>,</div><div class="line">    <span class="number">68</span>: <span class="string">'D'</span>,</div><div class="line">    <span class="number">69</span>: <span class="string">'E'</span>,</div><div class="line">    <span class="number">70</span>: <span class="string">'F'</span>,</div><div class="line">    <span class="number">71</span>: <span class="string">'G'</span>,</div><div class="line">    <span class="number">72</span>: <span class="string">'H'</span>,</div><div class="line">    <span class="number">73</span>: <span class="string">'I'</span>,</div><div class="line">    <span class="number">74</span>: <span class="string">'J'</span>,</div><div class="line">    <span class="number">75</span>: <span class="string">'K'</span>,</div><div class="line">    <span class="number">76</span>: <span class="string">'L'</span>,</div><div class="line">    <span class="number">77</span>: <span class="string">'M'</span>,</div><div class="line">    <span class="number">78</span>: <span class="string">'N'</span>,</div><div class="line">    <span class="number">79</span>: <span class="string">'O'</span>,</div><div class="line">    <span class="number">80</span>: <span class="string">'P'</span>,</div><div class="line">    <span class="number">81</span>: <span class="string">'Q'</span>,</div><div class="line">    <span class="number">82</span>: <span class="string">'R'</span>,</div><div class="line">    <span class="number">83</span>: <span class="string">'S'</span>,</div><div class="line">    <span class="number">84</span>: <span class="string">'T'</span>,</div><div class="line">    <span class="number">85</span>: <span class="string">'U'</span>,</div><div class="line">    <span class="number">86</span>: <span class="string">'V'</span>,</div><div class="line">    <span class="number">87</span>: <span class="string">'W'</span>,</div><div class="line">    <span class="number">88</span>: <span class="string">'X'</span>,</div><div class="line">    <span class="number">89</span>: <span class="string">'Y'</span>,</div><div class="line">    <span class="number">90</span>: <span class="string">'Z'</span>,</div><div class="line"></div><div class="line">    <span class="number">91</span>: <span class="string">'Windows'</span>,</div><div class="line">    <span class="number">93</span>: <span class="string">'Right Click'</span>,</div><div class="line"></div><div class="line">    <span class="number">96</span>: <span class="string">'Numpad 0'</span>,</div><div class="line">    <span class="number">97</span>: <span class="string">'Numpad 1'</span>,</div><div class="line">    <span class="number">98</span>: <span class="string">'Numpad 2'</span>,</div><div class="line">    <span class="number">99</span>: <span class="string">'Numpad 3'</span>,</div><div class="line">    <span class="number">100</span>: <span class="string">'Numpad 4'</span>,</div><div class="line">    <span class="number">101</span>: <span class="string">'Numpad 5'</span>,</div><div class="line">    <span class="number">102</span>: <span class="string">'Numpad 6'</span>,</div><div class="line">    <span class="number">103</span>: <span class="string">'Numpad 7'</span>,</div><div class="line">    <span class="number">104</span>: <span class="string">'Numpad 8'</span>,</div><div class="line">    <span class="number">105</span>: <span class="string">'Numpad 9'</span>,</div><div class="line">    <span class="number">106</span>: <span class="string">'Numpad *'</span>,</div><div class="line">    <span class="number">107</span>: <span class="string">'Numpad +'</span>,</div><div class="line">    <span class="number">109</span>: <span class="string">'Numpad -'</span>,</div><div class="line">    <span class="number">110</span>: <span class="string">'Numpad .'</span>,</div><div class="line">    <span class="number">111</span>: <span class="string">'Numpad /'</span>,</div><div class="line"></div><div class="line">    <span class="number">112</span>: <span class="string">'F1'</span>,</div><div class="line">    <span class="number">113</span>: <span class="string">'F2'</span>,</div><div class="line">    <span class="number">114</span>: <span class="string">'F3'</span>,</div><div class="line">    <span class="number">115</span>: <span class="string">'F4'</span>,</div><div class="line">    <span class="number">116</span>: <span class="string">'F5'</span>,</div><div class="line">    <span class="number">117</span>: <span class="string">'F6'</span>,</div><div class="line">    <span class="number">118</span>: <span class="string">'F7'</span>,</div><div class="line">    <span class="number">119</span>: <span class="string">'F8'</span>,</div><div class="line">    <span class="number">120</span>: <span class="string">'F9'</span>,</div><div class="line">    <span class="number">121</span>: <span class="string">'F10'</span>,</div><div class="line">    <span class="number">122</span>: <span class="string">'F11'</span>,</div><div class="line">    <span class="number">123</span>: <span class="string">'F12'</span>,</div><div class="line"></div><div class="line">    <span class="number">144</span>: <span class="string">'Num Lock'</span>,</div><div class="line">    <span class="number">145</span>: <span class="string">'Scroll Lock'</span>,</div><div class="line">    <span class="number">182</span>: <span class="string">'My Computer'</span>,</div><div class="line">    <span class="number">183</span>: <span class="string">'My Calculator'</span>,</div><div class="line">    <span class="number">186</span>: <span class="string">';'</span>,</div><div class="line">    <span class="number">187</span>: <span class="string">'='</span>,</div><div class="line">    <span class="number">188</span>: <span class="string">','</span>,</div><div class="line">    <span class="number">189</span>: <span class="string">'-'</span>,</div><div class="line">    <span class="number">190</span>: <span class="string">'.'</span>,</div><div class="line">    <span class="number">191</span>: <span class="string">'/'</span>,</div><div class="line">    <span class="number">192</span>: <span class="string">'`'</span>,</div><div class="line">    <span class="number">219</span>: <span class="string">'['</span>,</div><div class="line">    <span class="number">220</span>: <span class="string">'\\'</span>,</div><div class="line">    <span class="number">221</span>: <span class="string">']'</span>,</div><div class="line">    <span class="number">222</span>: <span class="string">'\''</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * @desc 根据keycode获得键名</span></div><div class="line"><span class="comment"> * @param  &#123;Number&#125; keycode </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKeyName</span>(<span class="params">keycode</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (keyCodeMap[keycode]) &#123;</div><div class="line">        <span class="keyword">return</span> keyCodeMap[keycode];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Unknow Key(Key Code:'</span> + keycode + <span class="string">')'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="7-Object"><a href="#7-Object" class="headerlink" title="7.Object"></a>7.Object</h3><h4 id="7-1-deepClone"><a href="#7-1-deepClone" class="headerlink" title="7.1 deepClone"></a>7.1 deepClone</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * @desc 深拷贝，支持常见类型</span></div><div class="line"><span class="comment">     * @param &#123;Any&#125; values</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">obj</span>)</span>&#123; <span class="comment">//extend -&gt;深度克隆</span></div><div class="line"><span class="comment">//      console.log(obj.push);</span></div><div class="line">        <span class="comment">//var toStr = Object.prototype.toString;</span></div><div class="line">        <span class="comment">//var o = toStr.call(obj) === '[object Array]'?[]:&#123;&#125;;</span></div><div class="line">        <span class="keyword">var</span> o = obj.push?[]:&#123;&#125;;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> obj)&#123;</div><div class="line">            <span class="comment">//判断obj[attr]是不是对象类型的，如果是就再循环。</span></div><div class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> obj[attr] === <span class="string">'object'</span>)&#123;</div><div class="line">                o[attr] =  extend(obj[attr]);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                o[attr] = obj[attr];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> o;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">var</span> obj2 = extend(obj);</div></pre></td></tr></table></figure>
<h4 id="7-2-isEmptyObject"><a href="#7-2-isEmptyObject" class="headerlink" title="7.2 isEmptyObject"></a>7.2 isEmptyObject</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   判断`obj`是否为空</span></div><div class="line"><span class="comment"> * @param  &#123;Object&#125; obj</span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmptyObject</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span> || <span class="built_in">Array</span>.isArray(obj))</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    <span class="keyword">return</span> !<span class="built_in">Object</span>.keys(obj).length</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="8-Random"><a href="#8-Random" class="headerlink" title="8.Random"></a>8.Random</h3><h4 id="8-1-randomColor"><a href="#8-1-randomColor" class="headerlink" title="8.1 randomColor"></a>8.1 randomColor</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 随机生成颜色</span></div><div class="line"><span class="comment"> * @return &#123;String&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'#'</span> + (<span class="string">'00000'</span> + (<span class="built_in">Math</span>.random() * <span class="number">0x1000000</span> &lt;&lt; <span class="number">0</span>).toString(<span class="number">16</span>)).slice(<span class="number">-6</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="8-2-randomNum"><a href="#8-2-randomNum" class="headerlink" title="8.2 randomNum "></a>8.2 randomNum </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 生成指定范围随机数</span></div><div class="line"><span class="comment"> * @param  &#123;Number&#125; min </span></div><div class="line"><span class="comment"> * @param  &#123;Number&#125; max </span></div><div class="line"><span class="comment"> * @return &#123;Number&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomNum</span>(<span class="params">min, max</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.floor(min + <span class="built_in">Math</span>.random() * (max - min));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="9-Regexp"><a href="#9-Regexp" class="headerlink" title="9.Regexp"></a>9.Regexp</h3><h4 id="9-1-isEmail"><a href="#9-1-isEmail" class="headerlink" title="9.1 isEmail"></a>9.1 isEmail</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   判断是否为邮箱地址</span></div><div class="line"><span class="comment"> * @param  &#123;String&#125;  str</span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmail</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="regexp">/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/</span>.test(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-2-isIdCard"><a href="#9-2-isIdCard" class="headerlink" title="9.2 isIdCard"></a>9.2 isIdCard</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc  判断是否为身份证号</span></div><div class="line"><span class="comment"> * @param  &#123;String|Number&#125; str </span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isIdCard</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="regexp">/^(^[1-9]\d&#123;7&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;$)|(^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d&#123;4&#125;)|\d&#123;3&#125;[Xx])$)$/</span>.test(str)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-3-isPhoneNum"><a href="#9-3-isPhoneNum" class="headerlink" title="9.3 isPhoneNum"></a>9.3 isPhoneNum</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   判断是否为手机号</span></div><div class="line"><span class="comment"> * @param  &#123;String|Number&#125; str </span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPhoneNum</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="regexp">/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]&#123;8&#125;$/</span>.test(str)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="9-4-isUrl"><a href="#9-4-isUrl" class="headerlink" title="9.4 isUrl"></a>9.4 isUrl</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   判断是否为URL地址</span></div><div class="line"><span class="comment"> * @param  &#123;String&#125; str </span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUrl</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="regexp">/[-a-zA-Z0-9@:%._\+~#=]&#123;2,256&#125;\.[a-z]&#123;2,6&#125;\b([-a-zA-Z0-9@:%_\+.~#?&amp;//=]*)/i</span>.test(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="10-String"><a href="#10-String" class="headerlink" title="10.String"></a>10.String</h3><h4 id="10-1-digitUppercase"><a href="#10-1-digitUppercase" class="headerlink" title="10.1 digitUppercase"></a>10.1 digitUppercase</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   现金额转大写</span></div><div class="line"><span class="comment"> * @param  &#123;Number&#125; n </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">digitUppercase</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> fraction = [<span class="string">'角'</span>, <span class="string">'分'</span>];</div><div class="line">    <span class="keyword">var</span> digit = [</div><div class="line">        <span class="string">'零'</span>, <span class="string">'壹'</span>, <span class="string">'贰'</span>, <span class="string">'叁'</span>, <span class="string">'肆'</span>,</div><div class="line">        <span class="string">'伍'</span>, <span class="string">'陆'</span>, <span class="string">'柒'</span>, <span class="string">'捌'</span>, <span class="string">'玖'</span></div><div class="line">    ];</div><div class="line">    <span class="keyword">var</span> unit = [</div><div class="line">        [<span class="string">'元'</span>, <span class="string">'万'</span>, <span class="string">'亿'</span>],</div><div class="line">        [<span class="string">''</span>, <span class="string">'拾'</span>, <span class="string">'佰'</span>, <span class="string">'仟'</span>]</div><div class="line">    ];</div><div class="line">    <span class="keyword">var</span> head = n &lt; <span class="number">0</span> ? <span class="string">'欠'</span> : <span class="string">''</span>;</div><div class="line">    n = <span class="built_in">Math</span>.abs(n);</div><div class="line">    <span class="keyword">var</span> s = <span class="string">''</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; fraction.length; i++) &#123;</div><div class="line">        s += (digit[<span class="built_in">Math</span>.floor(n * <span class="number">10</span> * <span class="built_in">Math</span>.pow(<span class="number">10</span>, i)) % <span class="number">10</span>] + fraction[i]).replace(<span class="regexp">/零./</span>, <span class="string">''</span>);</div><div class="line">    &#125;</div><div class="line">    s = s || <span class="string">'整'</span>;</div><div class="line">    n = <span class="built_in">Math</span>.floor(n);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; unit[<span class="number">0</span>].length &amp;&amp; n &gt; <span class="number">0</span>; i++) &#123;</div><div class="line">        <span class="keyword">var</span> p = <span class="string">''</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; unit[<span class="number">1</span>].length &amp;&amp; n &gt; <span class="number">0</span>; j++) &#123;</div><div class="line">            p = digit[n % <span class="number">10</span>] + unit[<span class="number">1</span>][j] + p;</div><div class="line">            n = <span class="built_in">Math</span>.floor(n / <span class="number">10</span>);</div><div class="line">        &#125;</div><div class="line">        s = p.replace(<span class="regexp">/(零.)*零$/</span>, <span class="string">''</span>).replace(<span class="regexp">/^$/</span>, <span class="string">'零'</span>) + unit[<span class="number">0</span>][i] + s;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> head + s.replace(<span class="regexp">/(零.)*零元/</span>, <span class="string">'元'</span>)</div><div class="line">        .replace(<span class="regexp">/(零.)+/g</span>, <span class="string">'零'</span>)</div><div class="line">        .replace(<span class="regexp">/^整$/</span>, <span class="string">'零元整'</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="11-Support"><a href="#11-Support" class="headerlink" title="11.Support"></a>11.Support</h3><h4 id="11-1-isSupportWebP"><a href="#11-1-isSupportWebP" class="headerlink" title="11.1 isSupportWebP"></a>11.1 isSupportWebP</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc 判断浏览器是否支持webP格式图片</span></div><div class="line"><span class="comment"> * @return &#123;Boolean&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isSupportWebP</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !![].map &amp;&amp; <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>).toDataURL(<span class="string">'image/webp'</span>).indexOf(<span class="string">'data:image/webp'</span>) == <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="12-Time"><a href="#12-Time" class="headerlink" title="12.Time"></a>12.Time</h3><h4 id="12-1-formatPassTime"><a href="#12-1-formatPassTime" class="headerlink" title="12.1 formatPassTime"></a>12.1 formatPassTime</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * @desc   格式化$&#123;startTime&#125;距现在的已过时间</span></div><div class="line"><span class="comment"> * @param  &#123;Date&#125; startTime </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatPassTime</span>(<span class="params">startTime</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> currentTime = <span class="built_in">Date</span>.parse(<span class="keyword">new</span> <span class="built_in">Date</span>()),</div><div class="line">        time = currentTime - startTime,</div><div class="line">        day = <span class="built_in">parseInt</span>(time / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)),</div><div class="line">        hour = <span class="built_in">parseInt</span>(time / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)),</div><div class="line">        min = <span class="built_in">parseInt</span>(time / (<span class="number">1000</span> * <span class="number">60</span>)),</div><div class="line">        month = <span class="built_in">parseInt</span>(day / <span class="number">30</span>),</div><div class="line">        year = <span class="built_in">parseInt</span>(month / <span class="number">12</span>);</div><div class="line">    <span class="keyword">if</span> (year) <span class="keyword">return</span> year + <span class="string">"年前"</span></div><div class="line">    <span class="keyword">if</span> (month) <span class="keyword">return</span> month + <span class="string">"个月前"</span></div><div class="line">    <span class="keyword">if</span> (day) <span class="keyword">return</span> day + <span class="string">"天前"</span></div><div class="line">    <span class="keyword">if</span> (hour) <span class="keyword">return</span> hour + <span class="string">"小时前"</span></div><div class="line">    <span class="keyword">if</span> (min) <span class="keyword">return</span> min + <span class="string">"分钟前"</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">'刚刚'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="12-2-formatRemainTime"><a href="#12-2-formatRemainTime" class="headerlink" title="12.2 formatRemainTime"></a>12.2 formatRemainTime</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   格式化现在距$&#123;endTime&#125;的剩余时间</span></div><div class="line"><span class="comment"> * @param  &#123;Date&#125; endTime  </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatRemainTime</span>(<span class="params">endTime</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> startDate = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//开始时间</span></div><div class="line">    <span class="keyword">var</span> endDate = <span class="keyword">new</span> <span class="built_in">Date</span>(endTime); <span class="comment">//结束时间</span></div><div class="line">    <span class="keyword">var</span> t = endDate.getTime() - startDate.getTime(); <span class="comment">//时间差</span></div><div class="line">    <span class="keyword">var</span> d = <span class="number">0</span>,</div><div class="line">        h = <span class="number">0</span>,</div><div class="line">        m = <span class="number">0</span>,</div><div class="line">        s = <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (t &gt;= <span class="number">0</span>) &#123;</div><div class="line">        d = <span class="built_in">Math</span>.floor(t / <span class="number">1000</span> / <span class="number">3600</span> / <span class="number">24</span>);</div><div class="line">        h = <span class="built_in">Math</span>.floor(t / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>);</div><div class="line">        m = <span class="built_in">Math</span>.floor(t / <span class="number">1000</span> / <span class="number">60</span> % <span class="number">60</span>);</div><div class="line">        s = <span class="built_in">Math</span>.floor(t / <span class="number">1000</span> % <span class="number">60</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> d + <span class="string">"天 "</span> + h + <span class="string">"小时 "</span> + m + <span class="string">"分钟 "</span> + s + <span class="string">"秒"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="13-Url"><a href="#13-Url" class="headerlink" title="13.Url"></a>13.Url</h3><h4 id="13-1-parseQueryString"><a href="#13-1-parseQueryString" class="headerlink" title="13.1 parseQueryString"></a>13.1 parseQueryString</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   url参数转对象</span></div><div class="line"><span class="comment"> * @param  &#123;String&#125; url  default: window.location.href</span></div><div class="line"><span class="comment"> * @return &#123;Object&#125; </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseQueryString</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">    url = url == <span class="literal">null</span> ? <span class="built_in">window</span>.location.href : url</div><div class="line">    <span class="keyword">var</span> search = url.substring(url.lastIndexOf(<span class="string">'?'</span>) + <span class="number">1</span>)</div><div class="line">    <span class="keyword">if</span> (!search) &#123;</div><div class="line">        <span class="keyword">return</span> &#123;&#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"'</span> + <span class="built_in">decodeURIComponent</span>(search).replace(<span class="regexp">/"/g</span>, <span class="string">'\\"'</span>).replace(<span class="regexp">/&amp;/g</span>, <span class="string">'","'</span>).replace(<span class="regexp">/=/g</span>, <span class="string">'":"'</span>) + <span class="string">'"&#125;'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="13-2-stringfyQueryString"><a href="#13-2-stringfyQueryString" class="headerlink" title="13.2 stringfyQueryString"></a>13.2 stringfyQueryString</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * @desc   对象序列化</span></div><div class="line"><span class="comment"> * @param  &#123;Object&#125; obj </span></div><div class="line"><span class="comment"> * @return &#123;String&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringfyQueryString</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!obj) <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">    <span class="keyword">var</span> pairs = [];</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</div><div class="line">        <span class="keyword">var</span> value = obj[key];</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; value.length; ++i) &#123;</div><div class="line">                pairs.push(<span class="built_in">encodeURIComponent</span>(key + <span class="string">'['</span> + i + <span class="string">']'</span>) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(value[i]));</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        pairs.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(obj[key]));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> pairs.join(<span class="string">'&amp;'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>作者：SlaneYang</li>
<li>来源：<a href="https://segmentfault.com/a/1190000011966867" target="_blank" rel="external">https://segmentfault.com/a/1190000011966867</a></li>
</ul>
</blockquote>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
        
        
  <nav class="post-nav">
    
    
      <a class="next" href="/blogs/2017/12/01/loadding/">
        <span class="next-text nav-default">NEXT</span>
        <span class="prev-text nav-mobile">NEXT</span>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
  </div>


<div class="copyright">

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Songzhiguo powered by Hexo</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  



    
  





  
    <script type="text/javascript" src="/blogs/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/blogs/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/blogs/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/blogs/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/blogs/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
